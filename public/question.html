<html>

<head>
	<link href="../../navbar.css" type="text/css" rel="stylesheet" />
	<link href="../../question.css" type="text/css" rel="stylesheet" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
	<script src="../../cookie.js"></script>
 	<meta name="google-signin-scope" content="profile email">
	<meta name="google-signin-client_id" content="1093471702807-eqfo5mijcvdgac90o979f70aba4c9vj6.apps.googleusercontent.com">
	<script src="https://apis.google.com/js/platform.js" async defer></script>
</head>

<body>

	<form id="pop-form">
        <div id='pop-div' style="width: 800px;" class="pop-box">
            <header>
                <h3>Search...</h3>
               </header>
            <div class="pop-box-body">
                <p>
                   <h3 id="TopicTitle">Topic:</h3>
                   <div><h3 id="QuestionTitle">Questions:</h3></div>
                   <div><h3 id="ArticleTitle">Article:</h3></div>
                </p>
                <input type="button" value="close" onclick="hideDiv('pop-div');" style="float:right"/>
            </div>  
        </div>
    </form>

	<canvas id="canvas"></canvas>
	<script src="../../background.js"></script>
	<ul id="nav">
      <li>&nbsp&nbsp&nbsp</li>
      <li><a href="/"><font color="white">TechHub</font></a></li>
      <li id="searchbar" class="navi" class="hidden">
        <input id="bar" type="text" placeholder="Search for Topic, Question or Answer..."></input><button  href="login.html" id="sub_button" class="button" type="button">Search</button>
      </li>
        <li ><a href="/main.html"><font color="white">Feed</a></font></li>
        <li  ><a href="/community.html"><font color="white">Community</a></font></li>
        <li ><a href="/newpost.html"><font color="white">Post</a></font></li>
        <li ><div id='sta'><a href="/login.html" ><font color="white">Login</font></a></div></li>

        <li class="arrow"><a href="#nav2"><font color="white">&#10552</font></a></li>
    </ul>
    
  </bar>
	</br></br>

	<div class="head">
	</br>
	</br>
	</id>
	<div id="sidebar" >
		<ul>
			<li><a href="">What's Hot</a></li>
			<li><a href="main.html">My Feed</a></li>
			<li><a href="">My Collection</a></li>
			<li><a href="">What's new</a></li>
			<li><a href="">Setting</a></li>
			<li id="space"></li>
		</ul>
	</div>

	<div id="content">
		<div id="question">
			<h1>Question: <text id="question_title"></text></h1>
			<h4>Content: <text id="question_body"></text></h4>
			<h4>Rating: <text id="question_rating"></text></h4>
		</div>
		<div class="follow">
			<text> Author <a href="user.html"><text id="user_id"></text> </a></text>
			<img align="right" class="ava" src="../../resource/icon2.png" alt="Mountain View" style="width:40px;height:40px;"></img>
			<h4><text id="content_body"></text></h4>
			<div class="botbar"><text ><button class="vote">Upvote</button>(108), <a href="">Downvote</a>(20), <a href="">Comment</a>(3)</text></div>
		</div>

	</div>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
		<script src="../../navbar.js"></script>
		<div class="g-signin2" style="display: none"data-onsuccess="onSignIn"></div>

</body>
	<script>	
		var question_id = document.getElementById("recognition_tag").getAttribute("value");
		alert(question_id);

		// mock this would be replaced after getting service's data
/*
		var content = JSON.stringify('why are dogs so cute, balabalabalabalabalabalabalabalabalabalabalabalabalabalabalabalabalabalabalabalabalabalabalabala');
		var content = JSON.parse(content);
		
		var content_info = document.createTextNode(content);
		document.getElementById('question_body').appendChild(content_info);



		var answers = JSON.stringify([
			{'author_id': 'a1', 'author_src': 'resource/icon1.png', 'answer_content': "this is the answer", 'upvote': '100', 'downvote': '100', 'comment': [{'c1': 'this is c1'}, {'c2': 'this is c2'}]}, {'author_id': 'a2', 'author_src': 'resource/icon2.png', 'answer_content': "this is the answer2", 'upvote': '200', 'downvote': '200', 'comment': [{'c1': 'this is c1'}, {'c2': 'this is c2'}, {'c3': 'this is c3'}]}]);

		answers = JSON.parse(answers);

		for (var i = 0; i < answers.length; i++) {
		    var author_id = answers[i]['author_id'];
		  	var author_src = answers[i]['author_src'];
		  	var answer_content = answers[i]['answer_content'];
		  	var upvote = answers[i]['upvote'];
		  	var downvote = answers[i]['downvote'];
		  	var comments_length = answers[i]['comment'].length;

		    var div = document.createElement('div');
		    div.id = 'follow_' + i;
		    div.className = 'follow';
		    document.getElementById('content').appendChild(div);
			
			var newlink = document.createElement('a');
			newlink.setAttribute('href', 'https://www.google.ca');
		    document.getElementById(div.id).appendChild(newlink);
			
			// add author line
			var author_line = document.createTextNode("Author: " + author_id);
		    document.getElementById(div.id).appendChild(author_line);

		    // add profile
		    var profile = document.createElement('img');
		    profile.align = 'right';

			profile.className = "ava";
		    profile.src = author_src;

		    profile.alt = "Mountain View";
		    profile.style.width = '40';
		    profile.style.height = '40';
		    document.getElementById(div.id).appendChild(profile);

		    // add answer content
		    var linebreak = document.createElement("br");
		    var linebreak1 = document.createElement("br");
		    var linebreak2 = document.createElement("br");
		    var linebreak3 = document.createElement("br");


			document.getElementById(div.id).appendChild(linebreak);
			document.getElementById(div.id).appendChild(linebreak1);

			var answer_content = document.createTextNode(answer_content);
		    document.getElementById(div.id).appendChild(answer_content);
			document.getElementById(div.id).appendChild(linebreak2);

			alert('good');
			// add upvote ...

			var upvote_line = document.createTextNode('Upvote(' + upvote + '), Downvote(' + downvote + '), Comment(' + comments_length + ')');
			//var upvote_line = 'Upvote(' + upvote + '), Downvote(' + downvote + '), Comment(' + comments_length + ')';
			document.getElementById(div.id).appendChild(upvote_line);
			document.getElementById(div.id).appendChild(linebreak3);





		}
*/



/*
get all answer data one by one
generate html and write the data into the space in our html
*/




		// mock is over

		$.post("/posts/"+question_id+"/show", function(data,status){
			alert(data);
			data = JSON.parse(data).result;
			document.getElementById("question_title").innerHTML += data.title;
			document.getElementById("question_body").innerHTML += data.text;
			document.getElementById("question_rating").innerHTML += data.rating;

	    });

	</script>
</html>



